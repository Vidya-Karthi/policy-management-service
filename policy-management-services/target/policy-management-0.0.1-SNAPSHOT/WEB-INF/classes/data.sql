DROP TABLE IF EXISTS POLICY_DETAILS;
DROP TABLE IF EXISTS USER_DETAILS;
DROP TABLE IF EXISTS USER_POLICY_DETAILS;

CREATE TABLE POLICY_DETAILS
(
   POLICY_NO  INT  NOT NULL AUTO_INCREMENT,
   POLICY_NAME	VARCHAR(64) NOT NULL,
   POLICY_DETAILS  VARCHAR(255),
   PRIMARY KEY (POLICY_NO)
);

CREATE TABLE USER_DETAILS
(
   USER_ID     VARCHAR(64)  NOT NULL,
   ROLE			VARCHAR(64) NOT NULL,
   FIRST_NAME  VARCHAR(255),
   LAST_NAME   VARCHAR(255),
   DATE_OF_BIRTH VARCHAR(32),
   ADDRESS		VARCHAR(255),
   CONTACT_NO   VARCHAR(32),
   EMAIL       VARCHAR(32),
   PASSWORD    VARCHAR(32),
   PRIMARY KEY (USER_ID)
);

CREATE TABLE USER_POLICY_DETAILS (
  POLICY_NO INT NOT NULL,
  USER_ID VARCHAR(64) NOT NULL,
  POLICY_NAME VARCHAR(64) NOT NULL,
  AMOUNT_PAID NUMBER(8,2),
  POLICY_END_DATE DATE,
  CONSTRAINT USER_POLICY_DETAILS_pk PRIMARY KEY (POLICY_NO, USER_ID),
  CONSTRAINT fk_USER_DETAILS FOREIGN KEY (USER_ID) REFERENCES USER_DETAILS(USER_ID),
  CONSTRAINT fk_POLICY_DETAILS FOREIGN KEY (POLICY_NO) REFERENCES POLICY_DETAILS(POLICY_DETAILS)
);

INSERT INTO POLICY_DETAILS (POLICY_NO,POLICY_NAME,POLICY_DETAILS) VALUES 
 (1,'Health Insurance Policy 1','Policy Details 1');
INSERT INTO POLICY_DETAILS (POLICY_NO,POLICY_NAME,POLICY_DETAILS) VALUES  
 (2,'Health Insurance Policy 2','Policy Details 2');
INSERT INTO POLICY_DETAILS (POLICY_NO,POLICY_NAME,POLICY_DETAILS) VALUES  
 (3,'Health Insurance Policy 3','Policy Details 3');
INSERT INTO POLICY_DETAILS (POLICY_NO,POLICY_NAME,POLICY_DETAILS) VALUES  
 (4,'Health Insurance Policy 4','Policy Details 4');
 INSERT INTO POLICY_DETAILS (POLICY_NO,POLICY_NAME,POLICY_DETAILS) VALUES 
 (5,'Health Insurance Policy 5','Policy Details 5');
 


INSERT INTO USER_DETAILS (USER_ID,ROLE,FIRST_NAME,LAST_NAME,DATE_OF_BIRTH,ADDRESS,CONTACT_NO,EMAIL,PASSWORD) VALUES 
 ('Admin','admin','admin','admin','06/02/1990','1ST street','4123123411','admin@admin.com','Admin'),
 ('vidya2604','user','vidya','karthick','26/04/1982','2nd street','1231211234','vidya@gmail.com','abcdefgh'),
 ('john2804','user','john','sam','26/04/1992','2nd street','1231211235','john@gmail.com','sunday123');


INSERT INTO USER_POLICY_DETAILS (POLICY_NO,USER_ID,POLICY_NAME,AMOUNT_PAID,POLICY_END_DATE) VALUES 
 (1,'vidya2604','Health Insurance Policy 1',1000.00,to_Date('12-06-2020','DD-MM-YYYY'));
INSERT INTO USER_POLICY_DETAILS (POLICY_NO,USER_ID,POLICY_NAME,AMOUNT_PAID,POLICY_END_DATE) VALUES 
 (2,'vidya2604','Health Insurance Policy 2',1000.00,to_Date('19-06-2020','DD-MM-YYYY'));
 INSERT INTO USER_POLICY_DETAILS (POLICY_NO,USER_ID,POLICY_NAME,AMOUNT_PAID,POLICY_END_DATE) VALUES 
 (3,'vidya2604','Health Insurance Policy 3',1000.00,to_Date('20-06-2020','DD-MM-YYYY'));